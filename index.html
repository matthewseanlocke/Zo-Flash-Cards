<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Zo Flash Cards</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Andika:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gradient-to-br from-blue-400 via-purple-500 to-pink-500 min-h-screen">
    <!-- Navigation Header -->
    <nav class="bg-white/20 backdrop-blur-sm py-2 px-4 shadow-lg">
        <div class="max-w-md mx-auto flex justify-between items-center">
            <div class="flex items-baseline gap-2">
                <h1 class="text-white text-xl font-bold">Zo Flash Cards</h1>
                <span id="versionDisplay" class="text-white/50 text-xs">v1.25.0</span>
            </div>
            <button id="exitBtn" class="text-white p-2 hidden" title="Exit Test">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
    </nav>


    <!-- Main Game Area -->
    <main class="flex flex-col items-center p-2 space-y-2 min-h-[calc(100vh-60px)]">
        <!-- Progress Bar -->
        <div id="progressContainer" class="w-full max-w-md hidden">
            <div class="flex justify-between text-white text-sm mb-2">
                <span id="currentCard">1</span>
                <span id="totalCards">26</span>
            </div>
            <div class="w-full bg-white/30 rounded-full h-2">
                <div id="progressBar" class="bg-white h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
            </div>
        </div>

        <!-- Flash Card Container -->
        <div id="cardContainer" class="relative w-full max-w-md h-full flex-1 perspective-1000">
            <!-- Welcome Card -->
            <div id="welcomeCard" class="absolute inset-0 flex flex-col gap-3 p-3 overflow-y-auto">
                <!-- Settings Panel -->
                <div class="welcome-panel settings-panel-inline">
                    <!-- Content Type Selection (stacked) -->
                    <div class="content-type-stack">
                        <div id="lettersBtn" class="content-type-row-btn selected">
                            <span class="content-type-icon icon-letters">
                                <span class="letter-char">A</span><span class="letter-char">a</span>
                            </span>
                            <!-- Options appear when selected -->
                            <div class="row-options">
                                <div id="letterCaseSection" class="letter-case-inline-row">
                                    <label class="letter-case-option">
                                        <input type="radio" name="letterCase" value="both" checked>
                                        <span class="letter-case-chip">Aa</span>
                                    </label>
                                    <label class="letter-case-option">
                                        <input type="radio" name="letterCase" value="uppercase">
                                        <span class="letter-case-chip">A</span>
                                    </label>
                                    <label class="letter-case-option">
                                        <input type="radio" name="letterCase" value="lowercase">
                                        <span class="letter-case-chip">a</span>
                                    </label>
                                </div>
                                <div class="order-inline-row">
                                    <button class="order-icon-btn sequential-btn selected" title="In Order">
                                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                                        </svg>
                                    </button>
                                    <button class="order-icon-btn random-btn" title="Shuffle">
                                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                        </svg>
                                    </button>
                                    <button class="order-icon-btn play-btn" title="Play">
                                        <svg fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M8 5v14l11-7z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div id="numbersBtn" class="content-type-row-btn">
                            <span class="content-type-icon icon-numbers">
                                <span class="number-char">1</span><span class="number-char">2</span><span class="number-char">3</span>
                            </span>
                            <!-- Options appear when selected -->
                            <div class="row-options">
                                <div class="order-inline-row">
                                    <button class="order-icon-btn sequential-btn selected" title="In Order">
                                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                                        </svg>
                                    </button>
                                    <button class="order-icon-btn random-btn" title="Shuffle">
                                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                        </svg>
                                    </button>
                                    <button class="order-icon-btn play-btn" title="Play">
                                        <svg fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M8 5v14l11-7z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div id="colorsBtn" class="content-type-row-btn">
                            <span class="content-type-icon icon-colors">
                                <svg viewBox="0 0 50 28" class="colors-icon-svg">
                                    <rect x="2" y="2" width="6" height="24" rx="1" fill="#ef4444"/>
                                    <rect x="10" y="2" width="6" height="24" rx="1" fill="#f97316"/>
                                    <rect x="18" y="2" width="6" height="24" rx="1" fill="#eab308"/>
                                    <rect x="26" y="2" width="6" height="24" rx="1" fill="#22c55e"/>
                                    <rect x="34" y="2" width="6" height="24" rx="1" fill="#3b82f6"/>
                                    <rect x="42" y="2" width="6" height="24" rx="1" fill="#a855f7"/>
                                </svg>
                            </span>
                            <!-- Options appear when selected -->
                            <div class="row-options">
                                <div class="order-inline-row">
                                    <button class="order-icon-btn sequential-btn selected" title="In Order">
                                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                                        </svg>
                                    </button>
                                    <button class="order-icon-btn random-btn" title="Shuffle">
                                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                        </svg>
                                    </button>
                                    <button class="order-icon-btn play-btn" title="Play">
                                        <svg fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M8 5v14l11-7z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div id="shapesBtn" class="content-type-row-btn">
                            <span class="content-type-icon icon-shapes">
                                <svg viewBox="0 0 60 20" class="shapes-icon-svg">
                                    <polygon points="10,2 18,18 2,18" fill="#ef4444"/>
                                    <circle cx="30" cy="10" r="8" fill="#22c55e"/>
                                    <rect x="42" y="2" width="16" height="16" fill="#3b82f6"/>
                                </svg>
                            </span>
                            <!-- Options appear when selected -->
                            <div class="row-options">
                                <div class="order-inline-row">
                                    <button class="order-icon-btn sequential-btn selected" title="In Order">
                                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                                        </svg>
                                    </button>
                                    <button class="order-icon-btn random-btn" title="Shuffle">
                                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                        </svg>
                                    </button>
                                    <button class="order-icon-btn play-btn" title="Play">
                                        <svg fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M8 5v14l11-7z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div id="drawBtn" class="content-type-row-btn">
                            <span class="content-type-icon icon-draw">
                                <svg viewBox="0 0 24 24" class="draw-icon-svg" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 19l7-7 3 3-7 7-3-3z"/>
                                    <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/>
                                    <path d="M2 2l7.586 7.586"/>
                                    <circle cx="11" cy="11" r="2"/>
                                </svg>
                            </span>
                            <!-- Options appear when selected -->
                            <div class="row-options">
                                <div class="order-inline-row">
                                    <button class="order-icon-btn play-btn" title="Start Drawing">
                                        <svg fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M8 5v14l11-7z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <!-- Tic Tac Toe -->
                        <div id="tictactoeBtn" class="content-type-row-btn">
                            <span class="content-type-icon icon-tictactoe">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="8" y1="2" x2="8" y2="22"/>
                                    <line x1="16" y1="2" x2="16" y2="22"/>
                                    <line x1="2" y1="8" x2="22" y2="8"/>
                                    <line x1="2" y1="16" x2="22" y2="16"/>
                                </svg>
                            </span>
                            <div class="row-options">
                                <div class="order-inline-row">
                                    <button class="order-icon-btn play-btn" title="Play Tic Tac Toe">
                                        <svg fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M8 5v14l11-7z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- History Section -->
                <div id="previousScoresSection" class="history-section">
                    <button id="historyToggleBtn" class="history-toggle-btn">
                        <svg class="history-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="9"/>
                            <path d="M12 6v6l4 2"/>
                            <path d="M3 12a9 9 0 0 1 9-9" stroke-dasharray="4 2"/>
                        </svg>
                        <svg class="history-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 9l-7 7-7-7"/>
                        </svg>
                    </button>
                    <div id="previousScoresList" class="history-list collapsed">
                        <p class="text-gray-500 text-center text-sm">No previous sessions yet</p>
                    </div>
                </div>
            </div>

            <!-- Flash Card -->
            <div id="flashCard" class="absolute inset-0 hidden">
                <!-- Icon Hint Popup (appears above card) -->
                <div id="iconHintOverlay" class="icon-hint-overlay hidden">
                    <div class="icon-hint-content">
                        <div class="icon-hint-icon" id="iconHintEmoji"></div>
                    </div>
                </div>
                <!-- Icon Hint Button (top left, blue) -->
                <button id="iconHintBtn" class="icon-hint-btn hidden" title="Hold to show picture hint">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                </button>
                <!-- Similar Letter Hint Popup (appears above card) -->
                <div id="hintOverlay" class="hint-overlay hidden">
                    <div class="hint-content">
                        <div class="hint-letter" id="hintCurrentLetter"></div>
                        <div class="hint-divider"></div>
                        <div class="hint-letter" id="hintSimilarLetter"></div>
                    </div>
                </div>
                <!-- Similar Letter Hint Button (top right, yellow) -->
                <button id="hintBtn" class="hint-btn hidden" title="Hold to show similar letter">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                    </svg>
                </button>
                <div class="card-inner relative w-full h-full transition-transform duration-700 transform-style-preserve-3d">
                    <!-- Front of Card -->
                    <div class="card-face card-front absolute inset-0 bg-white rounded-2xl shadow-2xl flex items-center justify-center backface-hidden">
                        <div id="cardContent" class="text-8xl font-bold text-gray-800"></div>
                        <canvas id="coloringCanvas" class="coloring-canvas"></canvas>
                    </div>
                    <!-- Back of Card (for animation) -->
                    <div class="card-face card-back absolute inset-0 bg-gradient-to-br from-purple-400 to-blue-500 rounded-2xl shadow-2xl flex items-center justify-center backface-hidden rotate-y-180">
                        <div class="text-white text-2xl font-bold">Next Card</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Controls -->
        <div id="gameControls" class="flex gap-3 justify-center hidden">
            <button id="prevBtn" class="bg-white/20 backdrop-blur-sm text-white p-3 rounded-full shadow-lg disabled:opacity-50">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
            </button>

            <button id="correctBtn" class="bg-green-500 text-white px-6 py-3 rounded-full shadow-lg font-medium">
                ‚úì Correct
            </button>

            <button id="wrongBtn" class="bg-red-500 text-white px-6 py-3 rounded-full shadow-lg font-medium">
                ‚úó Wrong
            </button>

            <button id="nextBtn" class="bg-white/20 backdrop-blur-sm text-white p-3 rounded-full shadow-lg disabled:opacity-50">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </button>
        </div>

        <!-- Instructions -->
        <div id="tapHint" class="text-white/70 text-center hidden">
            <p>Mark each card as Correct ‚úì or Wrong ‚úó</p>
        </div>

        <!-- Tic Tac Toe Game -->
        <div id="tictactoeGame" class="hidden">
            <div class="ttt-player-select">
                <button class="ttt-player-btn" data-player="1">
                    <span class="ttt-player-icon-display" id="tttPlayer1Icon">‚ùå</span>
                </button>
                <button class="ttt-player-btn" data-player="2">
                    <span class="ttt-player-icon-display black-o" id="tttPlayer2Icon"></span>
                </button>
            </div>
            <div class="ttt-status-card" id="tttStatusCard">
                <div class="ttt-status-card-inner">
                    <div class="ttt-status-front">
                        <span class="ttt-turn-label" id="tttFrontLabel">Turn:</span>
                        <span class="ttt-player-icon" id="tttFrontIcon">‚ùå</span>
                    </div>
                    <div class="ttt-status-back">
                        <span class="ttt-turn-label" id="tttBackLabel">Turn:</span>
                        <span class="ttt-player-icon" id="tttBackIcon">‚≠ï</span>
                    </div>
                </div>
            </div>
            <div class="ttt-board">
                <button class="ttt-cell" data-cell="0"></button>
                <button class="ttt-cell" data-cell="1"></button>
                <button class="ttt-cell" data-cell="2"></button>
                <button class="ttt-cell" data-cell="3"></button>
                <button class="ttt-cell" data-cell="4"></button>
                <button class="ttt-cell" data-cell="5"></button>
                <button class="ttt-cell" data-cell="6"></button>
                <button class="ttt-cell" data-cell="7"></button>
                <button class="ttt-cell" data-cell="8"></button>
            </div>
            <div class="ttt-controls">
                <button class="ttt-control-btn" id="tttUndoBtn" title="Undo">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a5 5 0 015 5v2M3 10l4-4m-4 4l4 4"/>
                    </svg>
                </button>
                <button class="ttt-control-btn" id="tttRedoBtn" title="Redo">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 10h-10a5 5 0 00-5 5v2M21 10l-4-4m4 4l-4 4"/>
                    </svg>
                </button>
                <button class="ttt-control-btn" id="tttClearBtn" title="Clear">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                </button>
            </div>
            <div class="ttt-icon-picker hidden" id="tttIconPicker">
                <!-- Icons will be populated by JS -->
            </div>
            <div class="ttt-result hidden">
                <button class="ttt-play-again">Play Again</button>
            </div>
        </div>
    </main>

    <!-- Fullscreen Draw Canvas (outside main so it's not hidden) -->
    <canvas id="drawCanvas" class="draw-canvas hidden"></canvas>

    <!-- Draw Mode FAB Buttons -->
    <div id="drawFabGroup" class="draw-fab-group hidden">
        <button id="drawUndoFab" class="draw-fab-mini" title="Undo" disabled>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 10h10a5 5 0 0 1 5 5v2"/>
                <path d="M3 10l5-5"/>
                <path d="M3 10l5 5"/>
            </svg>
        </button>
        <button id="drawRedoFab" class="draw-fab-mini" title="Redo" disabled>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10H11a5 5 0 0 0-5 5v2"/>
                <path d="M21 10l-5-5"/>
                <path d="M21 10l-5 5"/>
            </svg>
        </button>
        <button id="drawClearFab" class="draw-fab-mini" title="Clear">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 6h18"/>
                <path d="M8 6V4h8v2"/>
                <path d="M5 6v14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6"/>
                <path d="M10 11v6"/>
                <path d="M14 11v6"/>
            </svg>
        </button>
        <button id="drawPaletteBtn" class="draw-palette-fab" title="Open Palette">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 8 6.5 8 8 8.67 8 9.5 7.33 11 6.5 11zm3-4C8.67 7 8 6.33 8 5.5S8.67 4 9.5 4s1.5.67 1.5 1.5S10.33 7 9.5 7zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 4 14.5 4s1.5.67 1.5 1.5S15.33 7 14.5 7zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 8 17.5 8s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
            </svg>
        </button>
    </div>

    <!-- Draw Mode Modal -->
    <div id="drawModal" class="draw-modal hidden">
        <div class="draw-modal-backdrop" id="drawModalBackdrop"></div>
        <div class="draw-modal-content">
            <div class="color-palette">
                <button class="palette-color selected" data-color="#1f2937" style="background: #1f2937;" title="Black"></button>
                <button class="palette-color" data-color="#ef4444" style="background: #ef4444;" title="Red"></button>
                <button class="palette-color" data-color="#f97316" style="background: #f97316;" title="Orange"></button>
                <button class="palette-color" data-color="#eab308" style="background: #eab308;" title="Yellow"></button>
                <button class="palette-color" data-color="#22c55e" style="background: #22c55e;" title="Green"></button>
                <button class="palette-color" data-color="#3b82f6" style="background: #3b82f6;" title="Blue"></button>
                <button class="palette-color" data-color="#a855f7" style="background: #a855f7;" title="Purple"></button>
                <button class="palette-color" data-color="#ec4899" style="background: #ec4899;" title="Pink"></button>
                <button class="palette-color" data-color="#ffffff" style="background: #ffffff;" title="White"></button>
                <button class="palette-color eraser-btn" data-color="eraser" title="Eraser">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 20H9L4 15l10-10 7 7-6 6 5 2z"/>
                        <path d="M6.5 13.5L11 9"/>
                    </svg>
                </button>
            </div>
            <div class="brush-row">
                <div class="brush-sizes">
                    <button class="brush-size-btn selected" data-size="small" title="Small">
                        <span class="brush-dot small"></span>
                    </button>
                    <button class="brush-size-btn" data-size="medium" title="Medium">
                        <span class="brush-dot medium"></span>
                    </button>
                    <button class="brush-size-btn" data-size="large" title="Large">
                        <span class="brush-dot large"></span>
                    </button>
                    <button class="brush-size-btn" data-size="xlarge" title="Extra Large">
                        <span class="brush-dot xlarge"></span>
                    </button>
                    <button class="brush-size-btn" data-size="xxlarge" title="Huge">
                        <span class="brush-dot xxlarge"></span>
                    </button>
                </div>
                <div class="fill-mode-group">
                    <button class="fill-mode-btn selected" data-fill="true" title="Solid Fill">
                        <svg viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="8"/></svg>
                    </button>
                    <button class="fill-mode-btn" data-fill="false" title="Outline Only">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="8"/></svg>
                    </button>
                </div>
            </div>
            <div class="stamp-panel">
                <div class="stamp-category-tabs">
                    <button class="stamp-tab selected" data-category="brush" title="Brush">
                        <svg viewBox="0 0 24 24" fill="currentColor" class="tab-icon"><circle cx="12" cy="12" r="6"/></svg>
                    </button>
                    <button class="stamp-tab" data-category="shapes" title="Shapes">
                        <svg viewBox="0 0 36 16" class="tab-icon shapes-tab-icon" fill="currentColor">
                            <polygon points="6,2 11,14 1,14"/>
                            <circle cx="18" cy="8" r="6"/>
                            <rect x="25" y="3" width="10" height="10"/>
                        </svg>
                    </button>
                    <button class="stamp-tab" data-category="numbers" title="Numbers">
                        <span class="tab-text">123</span>
                    </button>
                    <button class="stamp-tab" data-category="letters" title="Uppercase">
                        <span class="tab-text">ABC</span>
                    </button>
                    <button class="stamp-tab" data-category="lowercase" title="Lowercase">
                        <span class="tab-text">abc</span>
                    </button>
                </div>
                <div class="stamp-category-content">
                    <div class="stamp-content" data-category="brush">
                        <button class="brush-style-btn selected" data-style="brush" title="Round Brush">
                            <svg viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="6"/></svg>
                        </button>
                        <button class="brush-style-btn" data-style="calligraphy" title="Calligraphy">
                            <svg viewBox="0 0 24 24" fill="currentColor" transform="rotate(-45)"><ellipse cx="12" cy="12" rx="3" ry="8"/></svg>
                        </button>
                    </div>
                    <div class="stamp-content hidden" data-category="shapes">
                        <button class="brush-style-btn" data-style="circle" title="Circle">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="8"/></svg>
                        </button>
                        <button class="brush-style-btn" data-style="square" title="Square">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="4" width="16" height="16"/></svg>
                        </button>
                        <button class="brush-style-btn" data-style="triangle" title="Triangle">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3L22 21H2z"/></svg>
                        </button>
                        <button class="brush-style-btn" data-style="star" title="Star">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87L18.18 22 12 18.27 5.82 22 7 14.14l-5-4.87 6.91-1.01z"/></svg>
                        </button>
                        <button class="brush-style-btn" data-style="heart" title="Heart">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 21C12 21 4 13.5 4 8.5C4 5.42 6.42 3 9.5 3C11.24 3 12.91 4.03 12 5.5C11.09 4.03 12.76 3 14.5 3C17.58 3 20 5.42 20 8.5C20 13.5 12 21 12 21Z"/></svg>
                        </button>
                    </div>
                    <div class="stamp-content hidden" data-category="numbers">
                        <button class="brush-style-btn" data-style="num0" title="Zero"><span>0</span></button>
                        <button class="brush-style-btn" data-style="num1" title="One"><span>1</span></button>
                        <button class="brush-style-btn" data-style="num2" title="Two"><span>2</span></button>
                        <button class="brush-style-btn" data-style="num3" title="Three"><span>3</span></button>
                        <button class="brush-style-btn" data-style="num4" title="Four"><span>4</span></button>
                        <button class="brush-style-btn" data-style="num5" title="Five"><span>5</span></button>
                        <button class="brush-style-btn" data-style="num6" title="Six"><span>6</span></button>
                        <button class="brush-style-btn" data-style="num7" title="Seven"><span>7</span></button>
                        <button class="brush-style-btn" data-style="num8" title="Eight"><span>8</span></button>
                        <button class="brush-style-btn" data-style="num9" title="Nine"><span>9</span></button>
                    </div>
                    <div class="stamp-content hidden" data-category="letters">
                        <button class="brush-style-btn" data-style="letA" title="A"><span>A</span></button>
                        <button class="brush-style-btn" data-style="letB" title="B"><span>B</span></button>
                        <button class="brush-style-btn" data-style="letC" title="C"><span>C</span></button>
                        <button class="brush-style-btn" data-style="letD" title="D"><span>D</span></button>
                        <button class="brush-style-btn" data-style="letE" title="E"><span>E</span></button>
                        <button class="brush-style-btn" data-style="letF" title="F"><span>F</span></button>
                        <button class="brush-style-btn" data-style="letG" title="G"><span>G</span></button>
                        <button class="brush-style-btn" data-style="letH" title="H"><span>H</span></button>
                        <button class="brush-style-btn" data-style="letI" title="I"><span>I</span></button>
                        <button class="brush-style-btn" data-style="letJ" title="J"><span>J</span></button>
                        <button class="brush-style-btn" data-style="letK" title="K"><span>K</span></button>
                        <button class="brush-style-btn" data-style="letL" title="L"><span>L</span></button>
                        <button class="brush-style-btn" data-style="letM" title="M"><span>M</span></button>
                        <button class="brush-style-btn" data-style="letN" title="N"><span>N</span></button>
                        <button class="brush-style-btn" data-style="letO" title="O"><span>O</span></button>
                        <button class="brush-style-btn" data-style="letP" title="P"><span>P</span></button>
                        <button class="brush-style-btn" data-style="letQ" title="Q"><span>Q</span></button>
                        <button class="brush-style-btn" data-style="letR" title="R"><span>R</span></button>
                        <button class="brush-style-btn" data-style="letS" title="S"><span>S</span></button>
                        <button class="brush-style-btn" data-style="letT" title="T"><span>T</span></button>
                        <button class="brush-style-btn" data-style="letU" title="U"><span>U</span></button>
                        <button class="brush-style-btn" data-style="letV" title="V"><span>V</span></button>
                        <button class="brush-style-btn" data-style="letW" title="W"><span>W</span></button>
                        <button class="brush-style-btn" data-style="letX" title="X"><span>X</span></button>
                        <button class="brush-style-btn" data-style="letY" title="Y"><span>Y</span></button>
                        <button class="brush-style-btn" data-style="letZ" title="Z"><span>Z</span></button>
                    </div>
                    <div class="stamp-content hidden" data-category="lowercase">
                        <button class="brush-style-btn" data-style="lowA" title="a"><span>a</span></button>
                        <button class="brush-style-btn" data-style="lowB" title="b"><span>b</span></button>
                        <button class="brush-style-btn" data-style="lowC" title="c"><span>c</span></button>
                        <button class="brush-style-btn" data-style="lowD" title="d"><span>d</span></button>
                        <button class="brush-style-btn" data-style="lowE" title="e"><span>e</span></button>
                        <button class="brush-style-btn" data-style="lowF" title="f"><span>f</span></button>
                        <button class="brush-style-btn" data-style="lowG" title="g"><span>g</span></button>
                        <button class="brush-style-btn" data-style="lowH" title="h"><span>h</span></button>
                        <button class="brush-style-btn" data-style="lowI" title="i"><span>i</span></button>
                        <button class="brush-style-btn" data-style="lowJ" title="j"><span>j</span></button>
                        <button class="brush-style-btn" data-style="lowK" title="k"><span>k</span></button>
                        <button class="brush-style-btn" data-style="lowL" title="l"><span>l</span></button>
                        <button class="brush-style-btn" data-style="lowM" title="m"><span>m</span></button>
                        <button class="brush-style-btn" data-style="lowN" title="n"><span>n</span></button>
                        <button class="brush-style-btn" data-style="lowO" title="o"><span>o</span></button>
                        <button class="brush-style-btn" data-style="lowP" title="p"><span>p</span></button>
                        <button class="brush-style-btn" data-style="lowQ" title="q"><span>q</span></button>
                        <button class="brush-style-btn" data-style="lowR" title="r"><span>r</span></button>
                        <button class="brush-style-btn" data-style="lowS" title="s"><span>s</span></button>
                        <button class="brush-style-btn" data-style="lowT" title="t"><span>t</span></button>
                        <button class="brush-style-btn" data-style="lowU" title="u"><span>u</span></button>
                        <button class="brush-style-btn" data-style="lowV" title="v"><span>v</span></button>
                        <button class="brush-style-btn" data-style="lowW" title="w"><span>w</span></button>
                        <button class="brush-style-btn" data-style="lowX" title="x"><span>x</span></button>
                        <button class="brush-style-btn" data-style="lowY" title="y"><span>y</span></button>
                        <button class="brush-style-btn" data-style="lowZ" title="z"><span>z</span></button>
                    </div>
                </div>
            </div>
            <div class="draw-actions">
                <button id="undoBtn" class="draw-action-btn" title="Undo" disabled>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 10h10a5 5 0 0 1 5 5v2"/>
                        <path d="M3 10l5-5"/>
                        <path d="M3 10l5 5"/>
                    </svg>
                </button>
                <button id="redoBtn" class="draw-action-btn" title="Redo" disabled>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 10H11a5 5 0 0 0-5 5v2"/>
                        <path d="M21 10l-5-5"/>
                        <path d="M21 10l-5 5"/>
                    </svg>
                </button>
                <button id="clearCanvasBtn" class="draw-action-btn" title="Clear">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 6h18"/>
                        <path d="M8 6V4h8v2"/>
                        <path d="M5 6v14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6"/>
                        <path d="M10 11v6"/>
                        <path d="M14 11v6"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="fixed inset-0 bg-black/50 z-60 hidden">
        <div class="bg-white rounded-3xl absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 p-6 max-w-sm w-[90vw]">
            <h2 class="text-xl font-bold text-center mb-4">Delete Session?</h2>
            <p class="text-gray-600 text-center mb-6">This action cannot be undone.</p>
            <div class="flex gap-3">
                <button id="cancelDeleteBtn" class="flex-1 py-3 px-4 bg-gray-200 text-gray-700 rounded-lg font-medium">Cancel</button>
                <button id="confirmDeleteBtn" class="flex-1 py-3 px-4 bg-red-500 text-white rounded-lg font-medium">Delete</button>
            </div>
        </div>
    </div>

    <!-- Score Card Modal -->
    <div id="scoreModal" class="fixed inset-0 bg-black/50 z-50 hidden">
        <div class="bg-white rounded-3xl absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 p-4 max-w-xl w-[96vw] max-h-[92vh] overflow-y-auto">
            <h2 class="text-xl font-bold text-center mb-4">Session Complete! üéâ</h2>
            
            <!-- Summary Stats -->
            <div class="space-y-2 mb-4 bg-gray-50 p-3 rounded-lg">
                <div class="flex justify-between">
                    <span class="font-medium">Total Cards:</span>
                    <span id="totalCardsScore">0</span>
                </div>
                <div class="flex justify-between">
                    <span class="font-medium text-green-600">Correct:</span>
                    <span id="correctScore" class="text-green-600">0</span>
                </div>
                <div class="flex justify-between">
                    <span class="font-medium text-red-600">Wrong:</span>
                    <span id="wrongScore" class="text-red-600">0</span>
                </div>
                <div class="border-t pt-2 flex justify-between">
                    <span class="font-bold">Accuracy:</span>
                    <span id="accuracyScore" class="font-bold">0%</span>
                </div>
                <div id="replayCountRow" class="flex justify-between text-orange-600 hidden">
                    <span class="font-medium">Replay Attempts:</span>
                    <span id="replayCountScore">0</span>
                </div>
            </div>

            <!-- Detailed Results -->
            <div class="mb-6">
                <div id="detailedResults" class="grid grid-cols-6 gap-2 p-3 bg-gray-50 rounded-lg">
                    <!-- Results will be populated here -->
                </div>
            </div>
            
            <!-- Legend -->
            <div class="mb-4 mt-4 border-t pt-3">
                <div class="flex justify-center gap-4 text-sm">
                    <div class="flex items-center">
                        <div class="w-4 h-4 bg-green-500 rounded mr-2"></div>
                        <span>Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-4 h-4 bg-red-500 rounded mr-2"></div>
                        <span>Wrong</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-4 h-4 bg-gray-300 rounded mr-2"></div>
                        <span>Not Attempted</span>
                    </div>
                </div>
            </div>
            
            <div class="flex flex-col gap-3">
                <button id="replayWrongBtn" class="w-full py-3 px-4 bg-orange-500 text-white rounded-lg font-medium hover:bg-orange-600 transition-colors hidden">Replay Wrong Cards</button>
                <div class="flex gap-3">
                    <button id="playAgainBtn" class="flex-1 py-3 px-4 bg-green-500 text-white rounded-lg font-medium hover:bg-green-600 transition-colors">Play Again</button>
                    <button id="closeScoreBtn" class="flex-1 py-3 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Landscape Mode Blocker -->
    <div id="landscapeBlocker" class="landscape-blocker">
        <div class="landscape-message">
            <div class="rotate-icon">üì±</div>
            <h2>Please Rotate Your Device</h2>
            <p>This app works best in portrait mode</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
